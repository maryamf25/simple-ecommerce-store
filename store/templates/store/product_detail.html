{% extends "store/base.html" %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'store/css/product_detail.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}

{% block content %}
<div class="product-detail-container">
  <div class="image-section">
    <img src="{{ product.image.url|default:'https://via.placeholder.com/300' }}" alt="{{ product.name }}" />
  </div>

  <div class="info-section">
    <div class="badge {% if product.stock > 0 %}in-stock{% else %}out-of-stock{% endif %}">
      {% if product.stock > 0 %} In Stock {% else %} Out of Stock {% endif %}
    </div>

    <h2 class="product-title">{{ product.name }}</h2>

    {% if product.category %}
      <p class="category"><i class="fas fa-layer-group"></i> {{ product.category }}</p>
    {% endif %}

    <p class="description">{{ product.description|default:"No description available." }}</p>

    {% if product.warranty %}
      <p class="warranty"><i class="fas fa-shield-alt"></i> Warranty: {{ product.warranty }}</p>
    {% endif %}

    {% if product.tags.exists %}
    <div class="tags">
      <i class="fas fa-tags"></i>
      {% for tag in product.tags.all %}
        <span class="tag">{{ tag.name }}</span>
      {% endfor %}
    </div>
    {% endif %}

    <p class="price">Price: Rs. {{ product.price }}</p>

    <div class="actions">
      <form method="POST" action="{% url 'add_to_cart' product.id %}">
        {% csrf_token %}
        <button type="submit" class="btn-action">
          <i class="fas fa-cart-plus"></i> Add to Cart
        </button>
      </form>

      <form method="POST" action="{% url 'buy_now' product.id %}">
        {% csrf_token %}
        <button type="submit" class="btn-action buy-now">
          <i class="fas fa-bolt"></i> Buy Now
        </button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
